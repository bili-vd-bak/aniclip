# 贡献指南

::: tip 约定

1. `<变量名>`为变量，请根据实际情况填写  
2. `:<类型>`为数据类型，如`:str`字符串，表该变量用`""`包裹；`:num`数字，表该变量无须包裹  
3. `type`参数可以直接填写汉字，也可缩写：`v_`视频/画面；`s_`字幕；`l`丢失；`c`和谐  
4. `ss`参数为**符合FFMpeg格式**的时刻，需要补齐`0`，例如`00:18` `04:23:56` `08:17`  
5. `t`参数为**符合FFMpeg格式**的时长，或单位为秒的**数字**，或**不填**(仅画面/字幕和谐)，例如`5`=`00:05`,`67`=`01:07`  

:::

详情参考仓库中任意数据文件。  

## 提供 删减数据

可以向该仓库对应文件修改并**提交PR**，也可在仓库**ISSUE**填写对应模板。  
代码片段可通过[[liveditor|可视化编辑器]]生成。  

### 仓库存在该番

添加代码片段：  

```toml
[[<集数:str|num>]]
type = "<删减类型:str>"
ss = "<删减起始时刻(以source中视频为准):str>"
t = "<删减持续时长:str|num>" # 此行可不填
source = "<问题视频链接:str>"
tips = "<提示:str>" # 此行可不填
clip = "<删减片段视频链接(供观看)>" # 此行可不填
```

::: details e.g.

<<< ../src/timeline/2024.4|夜晚的水母不会游泳.toml{3-7,15-19}

:::

### 仓库不存在该番

1. 新建文件：  
`<番剧季度:str>|<番剧名称>.toml`  
e.g.:  
`2024.4|夜晚的水母不会游泳`  

2. 初始化文件：  

```toml
title = "<显示番剧标题:str>" # 此行可不填
tips = "<提示:str>" # 此行可不填
cover = "<番剧海报/封面链接:str>" # 此行可不填
```

::: details e.g.

<<< ../src/timeline/2024.4|夜晚的水母不会游泳.toml{1}

:::

3. 参考[[contribute#仓库存在该番|上文]]添加数据

## 提供 被删减视频片段

1. 进入该文档该番剧对应页面  
2. 找到表格中对应集数  
3. 在`贡献片段截取(FFMpeg)`栏点击`显示`,使用生成命令截取视频片段  

::: details 不会使用命令行？

其实并不复杂，您只需安装命令行后在终端复制粘贴生成的命令即可。  
详细教程：  
[B站搜索](https://search.bilibili.com/all?keyword=ffmpeg)  
[FFmpeg中文网](https://ffmpeg.github.net.cn/)  

:::

::: details e.g.

1. 生成命令：

```zsh
ffmpeg -ss 01:36 -i ${视频路径或链接} -t 00:12 -c copy "./2024.4|夜晚的水母不会游泳/1-01:41.mp4"
```

2. 将 `${视频路径或链接}`替换为 本地视频路径/远程视频直链 (记得加上`""`包裹url，或使用下方的小技巧)

```zsh
ffmpeg -ss 01:36 /
 -i "https://alist.xiaoya.pro/d/%E6%AF%8F%E6%97%A5%E6%9B%B4%E6%96%B0/%E5%8A%A8%E6%BC%AB/%E6%97%A5%E6%9C%AC/%E6%96%B0%E7%95%AA/06/%E5%A4%9C%E6%99%9A%E7%9A%84%E6%B0%B4%E6%AF%8D%E4%B8%8D%E4%BC%9A%E6%B8%B8%E6%B3%B3/%5BANi%5D%20%E5%A4%9C%E6%99%9A%E7%9A%84%E6%B0%B4%E6%AF%8D%E4%B8%8D%E6%9C%83%E6%B8%B8%E6%B3%B3%20-%2001%20%5B1080P%5D%5BBaha%5D%5BWEB-DL%5D%5BAAC%20AVC%5D%5BCHT%5D.mp4" / # [!code ++]
 -t 00:12 /
 -c copy /
 "./2024.4|夜晚的水母不会游泳/1-01:41.mp4"
```

:::

::: details 命令行小技巧

其实您无需每次都替换`${视频路径或链接}`为URL，而是通过为每集设置变量，每次直接`Ctrl+C`+`Ctrl+Shift+V`+`回车`即可。  

::: code-group

```powershell [Windows]
$视频路径或链接='视频链接'
```

```zsh [Linux/Mac]
export 视频路径或链接='视频链接'
```

:::

4. 上传视频片段以获取视频链接；您可在[此处](https://alist.xrzyun.eu.org/aniclip-upload)或任何无需登录的平台上传。  
5. 将此链接填入该集`clip = ""`中。  

```toml
[[<集数:str|num>]]
type = "<删减类型:str>"
ss = "<删减起始时刻(以source中视频为准):str>"
t = "<删减持续时长:str|num>" # 此行可不填
source = "<问题视频链接:str>"
tips = "<提示:str>" # 此行可不填
clip = "<删减片段视频链接(供观看)>" # [!code ++]
```
